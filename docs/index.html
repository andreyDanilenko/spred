<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>spred</title><meta name="description" content="Documentation for spred"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">spred</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>spred</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#spred" id="spred" style="color: inherit; text-decoration: none;">
  <h1>Spred</h1>
</a>
<p><a href="http://npm.im/spred"><img src="https://img.shields.io/npm/v/spred.svg" alt="npm"></a>
<a href="https://codecov.io/gh/art-bazhin/spred"><img src="https://codecov.io/gh/art-bazhin/spred/branch/master/graph/badge.svg?token=G3AF7HLH7W" alt="codecov"></a>
<a href="https://unpkg.com/spred/dist/spred.min.js"><img src="http://img.badgesize.io/https://unpkg.com/spred/dist/spred.min.js?compression=gzip&label=gzip" alt="gzip size"></a></p>
<p>Simple and fast JavaScript reactive programming library.</p>
<ul>
<li><strong>Small.</strong> 3 KB minified and gziped. No dependencies</li>
<li><strong>Fast.</strong> No unnecessary calculations and excellent performance</li>
<li><strong>Simple.</strong> Small API and autotracking of dependencies</li>
<li><strong>Well typed.</strong> Written in TypeScript</li>
</ul>

<a href="#basic-example" id="basic-example" style="color: inherit; text-decoration: none;">
  <h2>Basic Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">computed</span><span class="hl-1">, </span><span class="hl-2">batch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">formatter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Intl</span><span class="hl-1">.</span><span class="hl-7">DateTimeFormat</span><span class="hl-1">(</span><span class="hl-3">&#39;en-GB&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">name</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-3">&#39;Paul&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">instrument</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-3">&#39;bass&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">birthday</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-3">&#39;1942-06-18&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">formattedBirthday</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">formatter</span><span class="hl-1">.</span><span class="hl-7">format</span><span class="hl-1">(</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-7">birthday</span><span class="hl-1">()))</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">greeting</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(</span><br/><span class="hl-1">  () </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">`Hello. My name is </span><span class="hl-4">${</span><span class="hl-7">name</span><span class="hl-8">()</span><span class="hl-4">}</span><span class="hl-3">, I play </span><span class="hl-4">${</span><span class="hl-7">instrument</span><span class="hl-8">()</span><span class="hl-4">}</span><span class="hl-3"> and I was born on </span><span class="hl-4">${</span><span class="hl-7">formattedBirthday</span><span class="hl-8">()</span><span class="hl-4">}</span><span class="hl-3">.`</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-2">greeting</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">str</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-2">str</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; Hello. My name is Paul, I play bass and I was born on 18/06/1942.</span><br/><br/><span class="hl-7">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">name</span><span class="hl-1">(</span><span class="hl-3">&#39;Ringo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">instrument</span><span class="hl-1">(</span><span class="hl-3">&#39;drums&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">birthday</span><span class="hl-1">(</span><span class="hl-3">&#39;1940-07-07&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-9">// &gt; Hello. My name is Ringo, I play drums and I was born on 07/07/1940.</span>
</code></pre>
<p><a href="https://stackblitz.com/@art-bazhin/collections/spred-examples">All examples on StackBlitz</a></p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<pre><code class="language-sh"><span class="hl-1">npm install spred --save</span>
</code></pre>

<a href="#signals" id="signals" style="color: inherit; text-decoration: none;">
  <h2>Signals</h2>
</a>
<p><a href="https://art-bazhin.github.io/spred/interfaces/Signal.html">Signal</a> is the basic reactive primitive of the library. A signal stores a value and notifies its subscribers when it changes. There are two kinds of signals - writable and computed.</p>

<a href="#writable-signals" id="writable-signals" style="color: inherit; text-decoration: none;">
  <h3>Writable Signals</h3>
</a>
<p><a href="https://art-bazhin.github.io/spred/interfaces/WritableSignal.html">Writable signals</a> are created with a <a href="https://art-bazhin.github.io/spred/modules.html#writable">writable</a> function that takes the initial value of the signal.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">counter</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span>
</code></pre>
<p>To get the value of the signal, you need to call it without arguments.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-7">counter</span><span class="hl-1">()); </span><span class="hl-9">// 0</span>
</code></pre>
<p>To set a new value of the writable signal, you need to pass the value as an argument.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-7">counter</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-7">counter</span><span class="hl-1">()); </span><span class="hl-9">// 1</span>
</code></pre>
<p>Signal value updates can be subscribed to using the <a href="https://art-bazhin.github.io/spred/interfaces/Signal.html#subscribe">subscribe</a> method. The second argument of the method specifies whether the function should be called immediately after subscribing, and defaults to true. The method returns the unsubscribe function.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unsub</span><span class="hl-1"> = </span><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;The value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-9">// &gt; The value is 1</span><br/><br/><span class="hl-7">counter</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">);</span><br/><br/><span class="hl-9">// &gt; The value is 2</span>
</code></pre>

<a href="#computed-signals" id="computed-signals" style="color: inherit; text-decoration: none;">
  <h3>Computed Signals</h3>
</a>
<p>Computed signals automatically track their dependencies and recalculate their value when any of the dependencies triggered.
A computed signal can be created using the <a href="https://art-bazhin.github.io/spred/modules.html#computed">computed</a> function. It takes as its argument a function that calculates the value of the signal and depends only on other signal values.</p>
<p>Computed signals initialize their values lazily. That means that the calculation function triggers only when the signal has at least one subscriber / dependent signal with a subscriber.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">computed</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">counter</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">doubleCounter</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">counter</span><span class="hl-1">() * </span><span class="hl-10">2</span><span class="hl-1">);</span><br/><br/><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Double value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; Double value is 0</span><br/><br/><span class="hl-7">counter</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; Double value is 2</span>
</code></pre>

<a href="#change-detection" id="change-detection" style="color: inherit; text-decoration: none;">
  <h3>Change detection</h3>
</a>
<p>By default all signals trigger their dependants and subscribers only if its value changes.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">computed</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">counter</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">doubleCounter</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">counter</span><span class="hl-1">() * </span><span class="hl-10">2</span><span class="hl-1">);</span><br/><br/><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Double value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; Double value is 0</span><br/><br/><span class="hl-7">counter</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-9">// Nothing</span><br/><br/><span class="hl-7">counter</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; Double value is 2</span>
</code></pre>
<p>Signals use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is">Object.is</a> to compare values. A custom change detection function can be passed as a second argument of <a href="https://art-bazhin.github.io/spred/modules.html#writable">writable</a> or <a href="https://art-bazhin.github.io/spred/modules.html#computed">computed</a>.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">obj</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">({ </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-10">1</span><span class="hl-1"> }, (</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-2">b</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1"> !== </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><br/><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">obj</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Object value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; Object value is 1</span><br/><br/><span class="hl-7">obj</span><span class="hl-1">({ </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-10">1</span><span class="hl-1"> });</span><br/><span class="hl-9">// Nothing</span><br/><br/><span class="hl-7">obj</span><span class="hl-1">({ </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-10">2</span><span class="hl-1"> });</span><br/><span class="hl-9">// &gt; Object value is 2</span>
</code></pre>
<p>A signal will be updated on any incoming value if <code>true</code> is passed as a second argument.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">, </span><span class="hl-4">true</span><span class="hl-1">);</span><br/><br/><span class="hl-2">value</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;The value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; The value is 1</span><br/><br/><span class="hl-7">value</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; The value is 1</span><br/><br/><span class="hl-7">value</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; The value is 1</span>
</code></pre>

<a href="#error-handling" id="error-handling" style="color: inherit; text-decoration: none;">
  <h3>Error Handling</h3>
</a>
<p>Any signal that have subscribers and an exception ocured during the computation will log the error in the console and will not cause recalculation of its dependants. You can pass an exception handler as a third argument of the <a href="https://art-bazhin.github.io/spred/modules.html#computed">computed</a>.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">computed</span><span class="hl-1">, </span><span class="hl-2">writable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">sub</span><span class="hl-1"> = (</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;The value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">source</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">withError</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-7">source</span><span class="hl-1">() &gt; </span><span class="hl-10">10</span><span class="hl-1">) </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-3">&#39;bigger than 10&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-7">source</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(</span><span class="hl-2">withError</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unsub</span><span class="hl-1"> = </span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">(</span><span class="hl-2">sub</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; The value is 0</span><br/><br/><span class="hl-7">source</span><span class="hl-1">(</span><span class="hl-10">11</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; [X] bigger than 10</span><br/><br/><span class="hl-7">unsub</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">withCatchedError</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">, </span><span class="hl-4">null</span><span class="hl-1">, (</span><span class="hl-2">e</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">e</span><span class="hl-1">);</span><br/><br/><span class="hl-2">withCatchedError</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">(</span><span class="hl-2">sub</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; The value is bigger than 10</span><br/><br/><span class="hl-7">source</span><span class="hl-1">(</span><span class="hl-10">20</span><span class="hl-1">);</span><br/><span class="hl-9">// Nothing</span><br/><br/><span class="hl-7">source</span><span class="hl-1">(</span><span class="hl-10">5</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; The value is 5</span>
</code></pre>

<a href="#signal-creation" id="signal-creation" style="color: inherit; text-decoration: none;">
  <h3>Signal Creation</h3>
</a>
<p>If you need to create a readonly signal and a separate setter at once, you can use the <a href="https://art-bazhin.github.io/spred/modules.html#signal">signal</a> function.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-5">counter</span><span class="hl-1">, </span><span class="hl-5">setCounter</span><span class="hl-1">] = </span><span class="hl-7">signal</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;The value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><br/><span class="hl-9">// &gt; The value is 0</span><br/><br/><span class="hl-7">setCounter</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><br/><span class="hl-9">// &gt; The value is 1</span>
</code></pre>

<a href="#signal-as-event-emitter" id="signal-as-event-emitter" style="color: inherit; text-decoration: none;">
  <h3>Signal As Event Emitter</h3>
</a>
<p><a href="https://art-bazhin.github.io/spred/modules.html#on">on</a> function allows to subscribe to a signal updates without immediate subscriber execution.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">on</span><span class="hl-1">, </span><span class="hl-2">signal</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-5">click</span><span class="hl-1">, </span><span class="hl-5">emitClick</span><span class="hl-1">] = </span><span class="hl-7">signal</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unsub</span><span class="hl-1"> = </span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-2">click</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;CLICK&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-2">document</span><span class="hl-1">.</span><span class="hl-7">addEventListener</span><span class="hl-1">(</span><span class="hl-3">&#39;click&#39;</span><span class="hl-1">, </span><span class="hl-2">emitClick</span><span class="hl-1">);</span><br/><span class="hl-9">// [&gt; CLICK] on every document click</span>
</code></pre>

<a href="#batching-updates" id="batching-updates" style="color: inherit; text-decoration: none;">
  <h3>Batching Updates</h3>
</a>
<p>Writable signal updates are immediate and synchronous.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">batch</span><span class="hl-1">, </span><span class="hl-2">computed</span><span class="hl-1">, </span><span class="hl-2">on</span><span class="hl-1">, </span><span class="hl-2">writable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">b</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">sum</span><span class="hl-1"> = </span><span class="hl-7">computed</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">a</span><span class="hl-1">() + </span><span class="hl-7">b</span><span class="hl-1">());</span><br/><br/><span class="hl-2">sum</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-2">s</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">&#39;a + b = &#39;</span><span class="hl-1"> + </span><span class="hl-2">s</span><span class="hl-1">));</span><br/><span class="hl-9">// &gt; a + b = 0</span><br/><br/><span class="hl-7">a</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; a + b = 1</span><br/><br/><span class="hl-7">b</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; a + b = 2</span>
</code></pre>
<p>You can commit several updates as a single transaction using the <a href="https://art-bazhin.github.io/spred/modules.html#batch">batch</a> function.</p>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-7">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">a</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">b</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-9">// &gt; a + b = 4</span>
</code></pre>
<p>All updates inside subscriber functions are batched by default.</p>
<pre><code class="language-ts"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trigger</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-10">0</span><span class="hl-1">);</span><br/><br/><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-2">trigger</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">a</span><span class="hl-1">(</span><span class="hl-10">3</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">b</span><span class="hl-1">(</span><span class="hl-10">3</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">trigger</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-9">// &gt; a + b = 6</span>
</code></pre>

<a href="#watching" id="watching" style="color: inherit; text-decoration: none;">
  <h3>Watching</h3>
</a>
<p><a href="https://art-bazhin.github.io/spred/modules.html#watch">watch</a> function calls the passed callback immediately and every time the signals it depends on are triggered.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">batch</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1">, </span><span class="hl-2">writable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-3">&#39;Hello&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">b</span><span class="hl-1"> = </span><span class="hl-7">writable</span><span class="hl-1">(</span><span class="hl-3">&#39;World&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-7">watch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-7">a</span><span class="hl-8">()</span><span class="hl-4">}</span><span class="hl-3"> </span><span class="hl-4">${</span><span class="hl-7">b</span><span class="hl-8">()</span><span class="hl-4">}</span><span class="hl-3">!`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-9">// &gt; Hello World!</span><br/><br/><span class="hl-7">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">a</span><span class="hl-1">(</span><span class="hl-3">&#39;Foo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">b</span><span class="hl-1">(</span><span class="hl-3">&#39;Bar&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-9">// &gt; Foo Bar!</span>
</code></pre>

<a href="#lifecycle-hooks" id="lifecycle-hooks" style="color: inherit; text-decoration: none;">
  <h3>Lifecycle Hooks</h3>
</a>
<p>Every signal has several lifecycle hooks that can be subscribed to using special functions.</p>
<ul>
<li><code>onActivate</code> - emits when the signal becomes active (has at least one subscriber / dependent signal with a subscriber);</li>
<li><code>onDectivate</code> - emits when the signal becomes inactive (doesn&#39;t have any subscriber / dependent signal with a subscriber);</li>
<li><code>onUpdate</code> - emits when the signal updates its value;</li>
<li><code>onException</code> - emits when an exception is thrown during the signal computation.</li>
</ul>
<p><a href="https://stackblitz.com/edit/spred-lifecycle-hooks?devToolsHeight=33&amp;file=index.ts">Example on StackBlitz</a></p>

<a href="#effects" id="effects" style="color: inherit; text-decoration: none;">
  <h2>Effects</h2>
</a>
<p><a href="https://art-bazhin.github.io/spred/interfaces/Effect.html">Effect</a> is a wrapper for an asynchronous function. It creates auxiliary signals that represent the execution state of the function and its result.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">effect</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;spred&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-7">fetchUser</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-7">fetch</span><span class="hl-1">(</span><span class="hl-3">`https://swapi.dev/api/people/</span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">).</span><span class="hl-7">then</span><span class="hl-1">((</span><span class="hl-2">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">res</span><span class="hl-1">.</span><span class="hl-7">json</span><span class="hl-1">());</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">userFx</span><span class="hl-1"> = </span><span class="hl-7">effect</span><span class="hl-1">(</span><span class="hl-2">fetchUser</span><span class="hl-1">);</span>
</code></pre>
<p>Every effect has several signal properties.</p>
<ul>
<li><code>args</code> - receives arguments of the effect call;</li>
<li><code>data</code> - receives the result of the fulfilled effect;</li>
<li><code>exception</code> - receives the result of the rejected effect;</li>
<li><code>done</code> - receives any result of the effect, both fulfilled and rejected;</li>
<li><code>status</code> - receives status object of the effect;</li>
<li><code>aborted</code> - emits when effect is aborted or reset during execution, including a call when the previous call is still pending.</li>
</ul>
<pre><code class="language-ts"><span class="hl-9">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">data</span><span class="hl-1">, </span><span class="hl-5">status</span><span class="hl-1">, </span><span class="hl-5">call</span><span class="hl-1"> } = </span><span class="hl-2">userFx</span><span class="hl-1">;</span><br/><br/><span class="hl-7">watch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">html</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-7">status</span><span class="hl-1">().</span><span class="hl-2">value</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;pending&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">html</span><span class="hl-1"> = </span><span class="hl-3">&#39;Loading...&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;rejected&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">html</span><span class="hl-1"> = </span><span class="hl-3">&#39;Something went wrong&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;fulfilled&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-2">html</span><span class="hl-1"> = </span><span class="hl-3">`&lt;pre&gt;</span><span class="hl-4">${</span><span class="hl-6">JSON</span><span class="hl-8">.</span><span class="hl-7">stringify</span><span class="hl-8">(</span><span class="hl-7">data</span><span class="hl-8">(), </span><span class="hl-4">null</span><span class="hl-8">, </span><span class="hl-10">2</span><span class="hl-8">)</span><span class="hl-4">}</span><span class="hl-3">&lt;/pre&gt;`</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">document</span><span class="hl-1">.</span><span class="hl-2">body</span><span class="hl-1">.</span><span class="hl-2">innerHTML</span><span class="hl-1"> = </span><span class="hl-2">html</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">call</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span>
</code></pre>
<p><a href="https://stackblitz.com/edit/spred-effects?file=index.ts">Example on StackBlitz</a></p>

<a href="#integration" id="integration" style="color: inherit; text-decoration: none;">
  <h2>Integration</h2>
</a>

<a href="#svelte" id="svelte" style="color: inherit; text-decoration: none;">
  <h3>Svelte</h3>
</a>
<p>Spred signals implement <a href="https://svelte.dev/docs#run-time-svelte-store">Svelte store contract</a> so you don&#39;t need any additional package to use them in Svelte apps.</p>
<p><a href="https://stackblitz.com/edit/spred-svelte?file=src/lib/Counter.svelte">Example on StackBlitz</a></p>

<a href="#react" id="react" style="color: inherit; text-decoration: none;">
  <h3>React</h3>
</a>
<p>Use the <a href="https://github.com/art-bazhin/spred-react">spred-react</a> package.</p>
<p><a href="https://stackblitz.com/edit/spred-react?file=App.tsx">Example on StackBlitz</a></p>

<a href="#references" id="references" style="color: inherit; text-decoration: none;">
  <h2>References</h2>
</a>
<p>Big thanks for inspiration to</p>
<ul>
<li><a href="https://github.com/Riim/cellx">cellx</a></li>
<li><a href="https://github.com/effector/effector">effector</a></li>
<li><a href="https://github.com/solidjs/solid">SolidJS</a></li>
<li><a href="https://github.com/vuejs/core">Vue 3</a></li>
<li><a href="https://github.com/nanostores/nanostores">nanostores</a></li>
<li><a href="https://github.com/hyoo-ru/mam_mol">$mol</a></li>
<li><a href="https://github.com/preactjs/signals">preact</a></li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-interface"><a href="interfaces/Config.html" class="tsd-kind-icon">Config</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Effect.html" class="tsd-kind-icon">Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/EffectStatusObject.html" class="tsd-kind-icon">Effect<wbr/>Status<wbr/>Object</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Signal.html" class="tsd-kind-icon">Signal</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Store.html" class="tsd-kind-icon">Store</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/WritableSignal.html" class="tsd-kind-icon">Writable<wbr/>Signal</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Computation" class="tsd-kind-icon">Computation</a></li><li class="tsd-kind-type-alias"><a href="modules.html#EffectStatus" class="tsd-kind-icon">Effect<wbr/>Status</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Filter" class="tsd-kind-icon">Filter</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Setter" class="tsd-kind-icon">Setter</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Subscriber" class="tsd-kind-icon">Subscriber</a></li><li class="tsd-kind-variable"><a href="modules.html#VOID" class="tsd-kind-icon">VOID</a></li><li class="tsd-kind-function"><a href="modules.html#batch" class="tsd-kind-icon">batch</a></li><li class="tsd-kind-function"><a href="modules.html#collect" class="tsd-kind-icon">collect</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#computed" class="tsd-kind-icon">computed</a></li><li class="tsd-kind-function"><a href="modules.html#configure" class="tsd-kind-icon">configure</a></li><li class="tsd-kind-function"><a href="modules.html#createLogger" class="tsd-kind-icon">create<wbr/>Logger</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#effect" class="tsd-kind-icon">effect</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#getValue" class="tsd-kind-icon">get<wbr/>Value</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isSignal" class="tsd-kind-icon">is<wbr/>Signal</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isStore" class="tsd-kind-icon">is<wbr/>Store</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isWritableSignal" class="tsd-kind-icon">is<wbr/>Writable<wbr/>Signal</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isolate" class="tsd-kind-icon">isolate</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#named" class="tsd-kind-icon">named</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#on" class="tsd-kind-icon">on</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#onActivate" class="tsd-kind-icon">on<wbr/>Activate</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#onDeactivate" class="tsd-kind-icon">on<wbr/>Deactivate</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#onException" class="tsd-kind-icon">on<wbr/>Exception</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#onUpdate" class="tsd-kind-icon">on<wbr/>Update</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#sampleValue" class="tsd-kind-icon">sample<wbr/>Value</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#signal" class="tsd-kind-icon">signal</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#store" class="tsd-kind-icon">store</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#watch" class="tsd-kind-icon">watch</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#writable" class="tsd-kind-icon">writable</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>