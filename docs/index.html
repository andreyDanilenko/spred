<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@spred/core</title><meta name="description" content="Documentation for @spred/core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@spred/core</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@spred/core</h2></div><div class="tsd-panel tsd-typography"><a id="md:spred" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Spred<a href="#md:spred" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="http://npm.im/@spred/core"><img src="https://img.shields.io/npm/v/@spred/core.svg" alt="npm"></a>
<a href="https://codecov.io/gh/art-bazhin/spred"><img src="https://codecov.io/gh/art-bazhin/spred/branch/master/graph/badge.svg?token=G3AF7HLH7W" alt="codecov"></a>
<a href="https://unpkg.com/@spred/core/dist/spred.min.js"><img src="https://img.badgesize.io/https:/unpkg.com/@spred/core/dist/spred.min.js?label=gzip&amp;compression=gzip" alt="gzip size"></a></p>
<p>Simple and fast JavaScript reactive programming library.</p>
<ul>
<li><strong>Small.</strong> 2 KB minified and gzipped. No dependencies</li>
<li><strong>Fast.</strong> No unnecessary calculations and excellent performance</li>
<li><strong>Simple.</strong> Small API and autotracking of dependencies</li>
<li><strong>Well typed.</strong> Written in TypeScript</li>
</ul>
<p><a href="https://art-bazhin.github.io/spred/modules.html">API Reference</a></p>
<a id="md:basic-example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic Example<a href="#md:basic-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1">, </span><span class="hl-2">effect</span><span class="hl-1">, </span><span class="hl-2">batch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@spred/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">formatter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">Intl</span><span class="hl-1">.</span><span class="hl-6">DateTimeFormat</span><span class="hl-1">(</span><span class="hl-3">&#39;en-GB&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">name</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-3">&#39;Paul&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">instrument</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-3">&#39;bass&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">birthday</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-3">&#39;1942-06-18&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">formattedBirthday</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">formatter</span><span class="hl-1">.</span><span class="hl-6">format</span><span class="hl-1">(</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">birthday</span><span class="hl-1">)))</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">effect</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">`Hello. My name is </span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-7">(</span><span class="hl-2">name</span><span class="hl-7">)</span><span class="hl-4">}</span><span class="hl-3">, I play </span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-7">(</span><span class="hl-2">instrument</span><span class="hl-7">)</span><span class="hl-4">}</span><span class="hl-3"> `</span><span class="hl-1"> +</span><br/><span class="hl-1">      </span><span class="hl-3">`and I was born on </span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-7">(</span><span class="hl-2">formattedBirthday</span><span class="hl-7">)</span><span class="hl-4">}</span><span class="hl-3">.`</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Hello. My name is Paul, I play bass and I was born on 18/06/1942.</span><br/><br/><span class="hl-6">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;Ringo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">instrument</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;drums&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">birthday</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;1940-07-07&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-8">// &gt; Hello. My name is Ringo, I play drums and I was born on 07/07/1940.</span>
</code><button type="button">Copy</button></pre>

<p><a href="https://stackblitz.com/@art-bazhin/collections/spred-examples">All examples on StackBlitz</a></p>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-6">npm</span><span class="hl-1"> </span><span class="hl-3">install</span><span class="hl-1"> </span><span class="hl-3">@spred/core</span><span class="hl-1"> </span><span class="hl-4">--save</span>
</code><button type="button">Copy</button></pre>

<a id="md:signals" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Signals<a href="#md:signals" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://art-bazhin.github.io/spred/classes/Signal.html">Signal</a> is the basic reactive primitive of the library. A signal stores a value and notifies its subscribers when it changes. To create a <a href="https://art-bazhin.github.io/spred/classes/WritableSignal.html">writable signal</a> you should call the <a href="https://art-bazhin.github.io/spred/functions/signal-1.html">signal</a> function with an initial value that is not a function.</p>
<pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1">, </span><span class="hl-2">on</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@spred/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">counter</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>You can get the current value of a signal by the <a href="https://art-bazhin.github.io/spred/classes/Signal.html#value">value</a> field.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; 0</span>
</code><button type="button">Copy</button></pre>

<p>To set a new value of a writable signal, you should call the <a href="https://art-bazhin.github.io/spred/classes/WritableSignal.html#set">set</a> method with the new value.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; 1</span>
</code><button type="button">Copy</button></pre>

<p>A call of the <a href="https://art-bazhin.github.io/spred/functions/signal-1.html">signal</a> function with a function argument creates a computed signal. That signal tracks the dependencies accessed by the passed getter and recalculates its own value when the dependencies change. The return value of the passed computation function must depend only on other signals accessed by the getter.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">doubleCounter</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">) * </span><span class="hl-9">2</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; 2</span>
</code><button type="button">Copy</button></pre>

<p>Signal value updates can be subscribed to using the <a href="https://art-bazhin.github.io/spred/classes/Signal.html#subscribe">subscribe</a> method. The second argument of the method specifies whether the function should be called immediately after subscribing, and defaults to true. The method returns the unsubscribe function.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unsub</span><span class="hl-1"> = </span><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Double value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Double value is 2</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Double value is 4</span><br/><br/><span class="hl-6">unsub</span><span class="hl-1">();</span><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">3</span><span class="hl-1">);</span><br/><span class="hl-8">// Nothing</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; 6</span>
</code><button type="button">Copy</button></pre>

<p>You can also subscribe to a signal value updates without immediately executing the subscriber using <a href="https://art-bazhin.github.io/spred/functions/on.html">on</a> function, which is a shorthand for <code>someSignal.subscribe(someFn, false)</code>.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-2">doubleCounter</span><span class="hl-1">, (</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Double value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-8">// Nothing</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">4</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Double value is 8</span>
</code><button type="button">Copy</button></pre>

<p>Computed signals initialize their values lazily. That means that the calculation function triggers only when the signal has at least one subscriber or dependent signal with a subscriber.</p>
<a id="md:batching-updates" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Batching Updates<a href="#md:batching-updates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Writable signal updates are immediate and synchronous.</p>
<pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1">, </span><span class="hl-2">batch</span><span class="hl-1">, </span><span class="hl-2">on</span><span class="hl-1">, </span><span class="hl-2">action</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@spred/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">b</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">sum</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">a</span><span class="hl-1">) + </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">b</span><span class="hl-1">));</span><br/><br/><span class="hl-2">sum</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">((</span><span class="hl-2">s</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;a + b = &#39;</span><span class="hl-1"> + </span><span class="hl-2">s</span><span class="hl-1">));</span><br/><span class="hl-8">// &gt; a + b = 0</span><br/><br/><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; a + b = 1</span><br/><br/><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; a + b = 2</span>
</code><button type="button">Copy</button></pre>

<p>You can commit several updates as a single transaction using the <a href="https://art-bazhin.github.io/spred/functions/batch.html">batch</a> function.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-6">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-8">// &gt; a + b = 4</span>
</code><button type="button">Copy</button></pre>

<p>You can also wrap your function in <a href="https://art-bazhin.github.io/spred/functions/action.html">action</a> to batch the updates made during its execution.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">act</span><span class="hl-1"> = </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">3</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">3</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">act</span><span class="hl-1">();</span><br/><span class="hl-8">// &gt; a + b = 6</span>
</code><button type="button">Copy</button></pre>

<p>All updates made inside subscribers and computations are batched too.</p>
<pre><code class="ts"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trigger</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><br/><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-2">trigger</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">4</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">4</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">trigger</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; a + b = 8</span>
</code><button type="button">Copy</button></pre>

<a id="md:change-detection" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Change Detection<a href="#md:change-detection" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>By default all signals trigger their dependents and subscribers only if its value changes.</p>
<pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@spred/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">counter</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">doubleCounter</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">) * </span><span class="hl-9">2</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unsub</span><span class="hl-1"> = </span><span class="hl-2">doubleCounter</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Double value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Double value is 0</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-8">// Nothing</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Double value is 2</span><br/><br/><span class="hl-6">unsub</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>Signals use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is">Object.is</a> to compare values, but you can set custom equality function in <a href="https://art-bazhin.github.io/spred/classes/SignalOptions.html">signal options</a>.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">obj</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><br/><span class="hl-1">  { </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-6">equal</span><span class="hl-1">(</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-2">b</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1"> === (</span><span class="hl-2">b</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">((</span><span class="hl-2">obj</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Object value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-8">// &gt; Object value is 1</span><br/><br/><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">({ </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> });</span><br/><span class="hl-8">// Nothing</span><br/><br/><span class="hl-2">obj</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">({ </span><span class="hl-2">value:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1"> });</span><br/><span class="hl-8">// &gt; Object value is 2</span>
</code><button type="button">Copy</button></pre>

<p>Undefined values are ignored and can be used for filtering.</p>
<pre><code class="ts"><span class="hl-8">/*...*/</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">oddCounter</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">) % </span><span class="hl-9">2</span><span class="hl-1">) </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">counter</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">oddCounter</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">((</span><span class="hl-2">value</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Odd value is &#39;</span><span class="hl-1"> + </span><span class="hl-2">value</span><span class="hl-1">));</span><br/><span class="hl-8">// &gt; Odd value is 1</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">);</span><br/><span class="hl-8">// Nothing</span><br/><br/><span class="hl-2">counter</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-9">3</span><span class="hl-1">);</span><br/><span class="hl-8">// &gt; Odd value is 3</span>
</code><button type="button">Copy</button></pre>

<a id="md:effects" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Effects<a href="#md:effects" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://art-bazhin.github.io/spred/functions/effect.html">effect</a> calls the passed function immediately and every time its dependencies change.</p>
<pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">signal</span><span class="hl-1">, </span><span class="hl-2">effect</span><span class="hl-1">, </span><span class="hl-2">batch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@spred/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-3">&#39;Hello&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">b</span><span class="hl-1"> = </span><span class="hl-6">signal</span><span class="hl-1">(</span><span class="hl-3">&#39;World&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">dispose</span><span class="hl-1"> = </span><span class="hl-6">effect</span><span class="hl-1">((</span><span class="hl-2">get</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-7">(</span><span class="hl-2">a</span><span class="hl-7">)</span><span class="hl-4">}</span><span class="hl-3"> </span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-7">(</span><span class="hl-2">b</span><span class="hl-7">)</span><span class="hl-4">}</span><span class="hl-3">!`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-8">// &gt; Hello World!</span><br/><br/><span class="hl-6">batch</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;Foo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;Bar&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-8">// &gt; Foo Bar!</span><br/><br/><span class="hl-6">dispose</span><span class="hl-1">();</span><br/><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-3">&#39;Hello&#39;</span><span class="hl-1">);</span><br/><span class="hl-8">// Nothing</span>
</code><button type="button">Copy</button></pre>

<p>Under the hood, the effect is simply a computed signal that becomes active at the moment of creation.</p>
<a id="md:lifecycle-hooks" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Lifecycle Hooks<a href="#md:lifecycle-hooks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Every signal has lifecycle hooks whose handlers can be set in the <a href="https://art-bazhin.github.io/spred/classes/SignalOptions.html">signal options</a>.</p>
<ul>
<li><code>onCreate</code> - the signal is created;</li>
<li><code>onActivate</code> - the signal becomes active (has at least one subscriber or dependent signal with a subscriber);</li>
<li><code>onDectivate</code> - the signal becomes inactive (doesn't have any subscriber or dependent signal with a subscriber);</li>
<li><code>onUpdate</code> - the signal updates its value;</li>
<li><code>onCleanup</code> - the signal value is going to be computed or the signal becomes inactive;</li>
<li><code>onException</code> - an unhandled exception occurs during the signal computation.</li>
</ul>
<p><a href="https://stackblitz.com/edit/spred-lifecycle-hooks?file=index.ts">Example on StackBlitz</a></p>
<a id="md:integration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration<a href="#md:integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:svelte" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Svelte<a href="#md:svelte" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Spred signals implement <a href="https://svelte.dev/docs/svelte-components#script-4-prefix-stores-with-$-to-access-their-values">Svelte store contract</a> so you don't need any additional package to use them in Svelte apps.</p>
<p><a href="https://stackblitz.com/edit/spred-svelte?file=src/lib/Counter.svelte">Example on StackBlitz</a></p>
<a id="md:react" class="tsd-anchor"></a><h3 class="tsd-anchor-link">React<a href="#md:react" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use the <a href="https://github.com/art-bazhin/spred-react">spred-react</a> package.</p>
<p><a href="https://stackblitz.com/edit/spred-react?file=App.tsx">Example on StackBlitz</a></p>
<a id="md:references" class="tsd-anchor"></a><h2 class="tsd-anchor-link">References<a href="#md:references" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Big thanks for inspiration to</p>
<ul>
<li><a href="https://github.com/Riim/cellx">cellx</a></li>
<li><a href="https://github.com/effector/effector">effector</a></li>
<li><a href="https://github.com/solidjs/solid">SolidJS</a></li>
<li><a href="https://github.com/vuejs/core">Vue 3</a></li>
<li><a href="https://github.com/nanostores/nanostores">nanostores</a></li>
<li><a href="https://github.com/hyoo-ru/mam_mol">$mol</a></li>
<li><a href="https://github.com/preactjs/signals">preact</a></li>
<li><a href="https://github.com/artalar/act">act</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:spred"><span>Spred</span></a><ul><li><a href="#md:basic-example"><span>Basic <wbr/>Example</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:signals"><span>Signals</span></a></li><li><a href="#md:batching-updates"><span>Batching <wbr/>Updates</span></a></li><li><a href="#md:change-detection"><span>Change <wbr/>Detection</span></a></li><li><a href="#md:effects"><span>Effects</span></a></li><li><a href="#md:lifecycle-hooks"><span>Lifecycle <wbr/>Hooks</span></a></li><li><a href="#md:integration"><span>Integration</span></a></li><li><ul><li><a href="#md:svelte"><span>Svelte</span></a></li><li><a href="#md:react"><span>React</span></a></li></ul></li><li><a href="#md:references"><span>References</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@spred/core</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
